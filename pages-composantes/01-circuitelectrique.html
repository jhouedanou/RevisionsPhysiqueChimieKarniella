<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le√ßon 01 - Circuit √âlectrique</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 0;
        }

        nav {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            border-bottom: 3px solid #667eea;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        nav a:hover {
            background: #667eea;
            transform: translateY(-2px);
        }

        nav a.active {
            background: #764ba2;
            border-bottom: 3px solid #ffed4e;
        }

        .btn-back {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            margin-right: auto !important;
            padding: 10px 20px !important;
        }

        .btn-back:hover {
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            transform: translateX(-5px);
        }

        .content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
            max-width: 1000px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        svg {
            width: 100%;
            height: auto;
            display: block;
            background: #fafafa;
            border-radius: 10px;
        }

        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .switch {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f0f0f0;
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #ddd;
            transition: all 0.3s ease;
        }

        .switch.active {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .toggle-switch {
            width: 60px;
            height: 34px;
            background: #ccc;
            border-radius: 17px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s ease;
            border: none;
            padding: 0;
        }

        .toggle-switch.on {
            background: #4caf50;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.3s ease;
        }

        .toggle-switch.on::after {
            left: 28px;
        }

        .switch-label {
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }

        .status {
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
            background: #ffe0b2;
            color: #e65100;
        }

        .status.on {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .info {
            margin-top: 25px;
            padding: 20px;
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            border-radius: 8px;
            color: #1565c0;
            font-size: 13px;
            line-height: 1.6;
        }

        .info strong {
            color: #0d47a1;
        }

        .battery-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding: 15px 20px;
            background: #f5f5f5;
            border-radius: 10px;
            border: 2px solid #ddd;
            flex-wrap: wrap;
        }

        .battery-controls label {
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }

        .battery-toggle {
            width: 70px;
            height: 34px;
            background: #ccc;
            border-radius: 17px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s ease;
            border: none;
            padding: 0;
        }

        .battery-toggle.cylindrique {
            background: #2196f3;
        }

        .battery-toggle::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.3s ease;
        }

        .battery-toggle.cylindrique::after {
            left: 38px;
        }

        .battery-type {
            font-weight: 600;
            color: #2196f3;
            font-size: 13px;
            min-width: 100px;
        }
    </style>
</head>
<body>
    <!-- Navigation Menu -->
    <nav>
        <a href="../index.html" class="btn-back">‚Üê Retour</a>
        <a href="01-circuitelectrique.html" class="active">‚ö° Circuit √âlectrique</a>
        <a href="02-sens-courant.html">üîÑ Sens du Courant</a>
        <a href="03-isolants-conducteurs.html">üîå Isolants &amp; Conducteurs</a>
        <a href="04-types-piles.html">üîã Types de Piles</a>
    </nav>

    <div class="content">
        <div class="container">
            <h1>‚ö° Circuit √âlectrique Interactif ‚ö°</h1>
            <p class="subtitle">Clique sur l'interrupteur pour contr√¥ler le flux d'√©nergie</p>

            <!-- Contr√¥les de batterie -->
            <div class="battery-controls">
                <label for="batteryToggle">Type de pile:</label>
                <button type="button" class="battery-toggle" id="batteryToggle" title="Basculer entre pile plate et cylindrique" aria-label="Basculer entre pile plate et pile cylindrique">Basculer</button>
                <span class="battery-type" id="batteryType">Pile Plate</span>
            </div>

            <svg viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
            <!-- D√©finitions -->
            <defs>
                <style>
                    @keyframes glow {
                        0%, 100% { filter: drop-shadow(0 0 3px rgba(255, 200, 0, 0.4)); }
                        50% { filter: drop-shadow(0 0 12px rgba(255, 200, 0, 0.9)); }
                    }

                    @keyframes pulse {
                        0%, 100% { r: 3; opacity: 1; }
                        50% { r: 5; opacity: 0.8; }
                    }

                    @keyframes flicker {
                        0%, 100% { fill: #ffed4e; }
                        50% { fill: #ffd700; }
                    }

                    @keyframes dim {
                        0%, 100% { fill: #e0e0e0; }
                        50% { fill: #d0d0d0; }
                    }

                    .animated-glow {
                        animation: glow 0.8s ease-in-out infinite;
                    }

                    .pulse-circle {
                        animation: pulse 0.8s ease-in-out infinite;
                    }

                    .flicker-bulb {
                        animation: flicker 0.1s ease-in-out infinite;
                    }

                    .bulb-on {
                        fill: #ffed4e !important;
                        filter: drop-shadow(0 0 8px rgba(255, 237, 74, 0.8));
                    }

                    .dim-bulb {
                        animation: dim 1.5s ease-in-out infinite;
                    }
                </style>
            </defs>

            <!-- Fond -->
            <rect width="900" height="650" fill="#f9f9f9"/>

            <!-- Titre -->
            <text x="450" y="45" font-size="32" font-weight="bold" text-anchor="middle" fill="#333">
                Circuit √âlectrique
            </text>

            <!-- PILE (G√©n√©rateur) -->
            <g id="pile" class="battery-flat">
                <rect x="80" y="120" width="70" height="120" fill="#e74c3c" stroke="#c0392b" stroke-width="2" rx="3"/>
                <rect x="105" y="95" width="20" height="25" fill="#f39c12" stroke="#d68910" stroke-width="2" rx="2"/>
                <rect x="100" y="245" width="30" height="25" fill="#34495e" stroke="#2c3e50" stroke-width="2" rx="2"/>
                <text x="115" y="185" font-size="14" text-anchor="middle" fill="white" font-weight="bold">PILE</text>
                <text x="115" y="310" font-size="11" text-anchor="middle" fill="#333" font-weight="bold">G√©n√©rateur</text>
                <!-- Bornes polaires -->
                <circle cx="110" cy="100" r="4" fill="#FFD700" stroke="#FFA500" stroke-width="1"/>
                <text x="110" y="85" font-size="12" text-anchor="middle" fill="#FF6B6B" font-weight="bold">+</text>
                <circle cx="120" cy="100" r="4" fill="#333" stroke="#000" stroke-width="1"/>
                <text x="120" y="85" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">‚àí</text>
            </g>

            <!-- FIL 1 - De la pile vers la lampe (haut) -->
            <path id="fil1" d="M 115 95 L 115 60 L 570 60" stroke="#ff6b6b" stroke-width="4" fill="none" stroke-linecap="round"/>

            <!-- Conteneur pour courant √©lectrique fil 1 -->
            <g id="particles-fil1" class="animated-glow"></g>

            <!-- LAMPE (R√©cepteur) -->
            <g id="lampe">
                <!-- Culot -->
                <circle cx="600" cy="95" r="22" fill="none" stroke="#d4a017" stroke-width="2"/>
                <circle cx="600" cy="95" r="18" fill="none" stroke="#d4a017" stroke-width="1" opacity="0.5"/>
                <!-- Ampoule -->
                <circle id="bulb" cx="600" cy="65" r="20" fill="#ffed4e" stroke="#f39c12" stroke-width="2" class="dim-bulb"/>
                <!-- Filament -->
                <path d="M 588 65 Q 594 50 600 58 Q 606 65 600 75" stroke="#ff6b6b" stroke-width="2" fill="none"/>
                <!-- Contact bas -->
                <rect x="588" y="115" width="24" height="10" fill="#999" stroke="#666" stroke-width="1" rx="1"/>
                <text x="600" y="165" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">LAMPE</text>
                <text x="600" y="182" font-size="11" text-anchor="middle" fill="#666">R√©cepteur</text>
            </g>

            <!-- FIL 2 - De la lampe vers l'interrupteur (c√¥t√© droit) -->
            <path id="fil2" d="M 600 125 L 600 240 L 480 240" stroke="#ff6b6b" stroke-width="4" fill="none" stroke-linecap="round"/>

            <!-- Conteneur pour courant √©lectrique fil 2 -->
            <g id="particles-fil2" class="animated-glow"></g>

            <!-- INTERRUPTEUR -->
            <g id="interrupteur" class="interactive-switch" style="cursor: pointer;">
                <!-- Fond -->
                <rect x="390" y="230" width="90" height="45" fill="#f5f5f5" stroke="#999" stroke-width="2" rx="8"/>

                <!-- Contact fixe gauche -->
                <circle cx="410" cy="252" r="5" fill="#333"/>
                <!-- Contact fixe droit -->
                <circle cx="460" cy="252" r="5" fill="#333"/>

                <!-- Levier mobile -->
                <g id="lever">
                    <circle cx="410" cy="252" r="6" fill="#444"/>
                    <line x1="410" y1="252" x2="460" y2="252" stroke="#333" stroke-width="4" stroke-linecap="round"/>
                    <circle cx="460" cy="252" r="6" fill="#444"/>
                </g>

                <text x="435" y="285" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">INTERRUPTEUR</text>
                <text id="switch-status" x="435" y="302" font-size="10" text-anchor="middle" fill="#4caf50" font-weight="bold">FERM√â</text>
            </g>

            <!-- FIL 3 - De l'interrupteur vers la pile (bas) -->
            <path id="fil3" d="M 390 252 L 300 252 L 300 360 L 115 360 L 115 245" stroke="#ff6b6b" stroke-width="4" fill="none" stroke-linecap="round"/>

            <!-- Conteneur pour courant √©lectrique fil 3 -->
            <g id="particles-fil3" class="animated-glow"></g>

            <!-- L√âGENDE / INFO -->
            <g id="legende">
                <rect x="60" y="400" width="780" height="220" fill="white" stroke="#ddd" stroke-width="2" rx="10"/>

                <text x="450" y="435" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
                    Comment fonctionne le circuit
                </text>

                <!-- Pile -->
                <circle cx="100" cy="475" r="10" fill="#e74c3c"/>
                <text x="125" y="478" font-size="12" fill="#333" font-weight="bold">Pile:</text>
                <text x="125" y="495" font-size="11" fill="#666">G√©n√®re l'√©nergie √©lectrique</text>

                <!-- Lampe -->
                <circle cx="320" cy="475" r="10" fill="#ffed4e" stroke="#f39c12" stroke-width="1"/>
                <text x="345" y="478" font-size="12" fill="#333" font-weight="bold">Lampe:</text>
                <text x="345" y="495" font-size="11" fill="#666">Utilise l'√©nergie pour briller</text>

                <!-- Interrupteur -->
                <rect x="535" y="465" width="20" height="20" fill="#e8e8e8" stroke="#666" stroke-width="1" rx="2"/>
                <text x="570" y="478" font-size="12" fill="#333" font-weight="bold">Interrupteur:</text>
                <text x="570" y="495" font-size="11" fill="#666">Active/D√©sactive le courant</text>

                <!-- Courant √©lectrique -->
                <circle cx="100" cy="525" r="3" fill="#FFD700" class="pulse-circle"/>
                <text x="125" y="528" font-size="12" fill="#333" font-weight="bold">Courant √©lectrique:</text>
                <text x="125" y="545" font-size="11" fill="#666">Se d√©place dans le circuit ferm√©</text>

                <!-- Flux -->
                <text x="320" y="528" font-size="12" fill="#333" font-weight="bold">Flux d'√©nergie:</text>
                <text x="320" y="545" font-size="11" fill="#666">Pile ‚Üí Lampe ‚Üí Interrupteur ‚Üí Pile</text>

                <!-- √âtat -->
                <text x="535" y="528" font-size="12" fill="#333" font-weight="bold">√âtat du circuit:</text>
                <text id="circuit-state" x="535" y="545" font-size="11" fill="#2ecc71" font-weight="bold">ACTIF ‚úì</text>
            </g>
        </svg>

        <div class="controls">
            <div class="switch active" id="switchContainer">
                <span class="switch-label">√âtat du circuit:</span>
                <button type="button" class="toggle-switch on" id="switchButton" aria-label="Activer/D√©sactiver le circuit"></button>
            </div>
            <div class="status on" id="statusDisplay">
                ‚úì Circuit ACTIF - √ânergie en circulation
            </div>
        </div>

        <div class="info">
            <strong>üí° Comment utiliser:</strong><br>
            ‚Ä¢ Clique sur l'interrupteur (ou le bouton √† droite) pour activer/d√©sactiver le courant<br>
            ‚Ä¢ Quand le circuit est ferm√© (ACTIF), le courant √©lectrique se d√©place dans les fils<br>
            ‚Ä¢ Quand le circuit est ouvert (INACTIF), le courant s'arr√™te et la lampe s'√©teint<br>
            ‚Ä¢ Les petits points jaunes repr√©sentent le courant √©lectrique circulant dans la boucle
        </div>
    </div>

    <script>
        class CircuitController {
            constructor() {
                this.isActive = true;
                this.particles = [];
                this.animationFrameId = null;

                this.svg = document.querySelector('svg');
                this.switchButton = document.getElementById('switchButton');
                this.switchStatus = document.getElementById('switch-status');
                this.circuitState = document.getElementById('circuit-state');
                this.statusDisplay = document.getElementById('statusDisplay');
                this.switchContainer = document.getElementById('switchContainer');
                this.interrupteur = document.querySelector('.interactive-switch');
                this.bulb = document.getElementById('bulb');

                this.setupEventListeners();
                this.initializeParticles();
                this.updateUI(); // Initialiser l'√©tat de la lampe
                this.startAnimation();
            }

            setupEventListeners() {
                this.switchButton.addEventListener('click', () => this.toggleCircuit());
                this.interrupteur.addEventListener('click', () => this.toggleCircuit());
            }

            toggleCircuit() {
                this.isActive = !this.isActive;
                this.updateUI();
            }

            updateUI() {
                if (this.isActive) {
                    this.switchButton.classList.add('on');
                    this.switchContainer.classList.add('active');
                    this.switchStatus.textContent = 'FERM√â';
                    this.switchStatus.setAttribute('fill', '#4caf50');
                    this.circuitState.textContent = 'ACTIF ‚úì';
                    this.circuitState.setAttribute('fill', '#2ecc71');
                    this.statusDisplay.textContent = '‚úì Circuit ACTIF - √ânergie en circulation';
                    this.statusDisplay.classList.add('on');
                    this.bulb.classList.add('bulb-on');
                    this.bulb.classList.remove('dim-bulb');
                    this.bulb.classList.remove('flicker-bulb');
                } else {
                    this.switchButton.classList.remove('on');
                    this.switchContainer.classList.remove('active');
                    this.switchStatus.textContent = 'OUVERT';
                    this.switchStatus.setAttribute('fill', '#f44336');
                    this.circuitState.textContent = 'INACTIF ‚úó';
                    this.circuitState.setAttribute('fill', '#f44336');
                    this.statusDisplay.textContent = '‚úó Circuit INACTIF - Aucun courant';
                    this.statusDisplay.classList.remove('on');
                    this.bulb.classList.remove('bulb-on');
                    this.bulb.classList.remove('flicker-bulb');
                    this.bulb.classList.add('dim-bulb');
                }
            }

            initializeParticles() {
                // D√©finir les trajets du courant √©lectrique
                this.paths = [
                    {
                        // Fil 1: Pile vers Lampe
                        points: [
                            {x: 115, y: 95},
                            {x: 115, y: 60},
                            {x: 570, y: 60}
                        ],
                        containerId: 'particles-fil1',
                        speed: 80
                    },
                    {
                        // Fil 2: Lampe vers Interrupteur
                        points: [
                            {x: 600, y: 125},
                            {x: 600, y: 240},
                            {x: 480, y: 240}
                        ],
                        containerId: 'particles-fil2',
                        speed: 100
                    },
                    {
                        // Fil 3: Interrupteur vers Pile
                        points: [
                            {x: 390, y: 252},
                            {x: 300, y: 252},
                            {x: 300, y: 360},
                            {x: 115, y: 360},
                            {x: 115, y: 245}
                        ],
                        containerId: 'particles-fil3',
                        speed: 120
                    }
                ];

                // Cr√©er le courant √©lectrique
                let particleId = 0;
                this.paths.forEach((path, pathIndex) => {
                    const particlesPerPath = 5;
                    for (let i = 0; i < particlesPerPath; i++) {
                        this.particles.push({
                            id: particleId++,
                            pathIndex: pathIndex,
                            progress: (i / particlesPerPath),
                            element: null
                        });
                    }
                });
            }

            createParticleElement(particle) {
                if (particle.element) {
                    particle.element.remove();
                }

                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('r', '3');
                circle.setAttribute('fill', '#FFD700');
                circle.setAttribute('class', 'pulse-circle');
                circle.setAttribute('opacity', '0.9');

                const container = document.getElementById(this.paths[particle.pathIndex].containerId);
                container.appendChild(circle);

                particle.element = circle;
            }

            getPositionOnPath(pathIndex, progress) {
                const path = this.paths[pathIndex];
                const points = path.points;

                // Calculer la distance totale
                let totalDistance = 0;
                const distances = [0];

                for (let i = 0; i < points.length - 1; i++) {
                    const dx = points[i + 1].x - points[i].x;
                    const dy = points[i + 1].y - points[i].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    totalDistance += dist;
                    distances.push(totalDistance);
                }

                // Trouver le segment
                const targetDistance = totalDistance * progress;
                let currentSegment = 0;

                for (let i = 0; i < distances.length - 1; i++) {
                    if (targetDistance >= distances[i] && targetDistance <= distances[i + 1]) {
                        currentSegment = i;
                        break;
                    }
                }

                // Interpoler dans le segment
                const segmentProgress = (targetDistance - distances[currentSegment]) /
                    (distances[currentSegment + 1] - distances[currentSegment]);

                const p1 = points[currentSegment];
                const p2 = points[currentSegment + 1];

                return {
                    x: p1.x + (p2.x - p1.x) * segmentProgress,
                    y: p1.y + (p2.y - p1.y) * segmentProgress
                };
            }

            animate() {
                if (this.isActive) {
                    this.particles.forEach(particle => {
                        if (!particle.element) {
                            this.createParticleElement(particle);
                        }

                        const path = this.paths[particle.pathIndex];
                        particle.progress += 0.005 * (path.speed / 100);

                        if (particle.progress > 1) {
                            particle.progress = 0;
                        }

                        const pos = this.getPositionOnPath(particle.pathIndex, particle.progress);
                        particle.element.setAttribute('cx', pos.x);
                        particle.element.setAttribute('cy', pos.y);
                    });
                } else {
                    // Si le circuit est inactif, cacher le courant √©lectrique
                    this.particles.forEach(particle => {
                        if (particle.element) {
                            particle.element.setAttribute('opacity', '0');
                        }
                    });
                }

                this.animationFrameId = requestAnimationFrame(() => this.animate());
            }

            startAnimation() {
                this.animate();
            }
        }

        // Initialiser le contr√¥leur du circuit
        const circuit = new CircuitController();

        // Contr√¥ler le toggle de batterie
        class BatteryController {
            constructor() {
                this.isFlat = true;
                this.batteryToggle = document.getElementById('batteryToggle');
                this.batteryType = document.getElementById('batteryType');
                this.pile = document.getElementById('pile');

                this.batteryToggle.addEventListener('click', () => this.toggleBatteryType());
            }

            toggleBatteryType() {
                this.isFlat = !this.isFlat;
                this.updateBatteryDisplay();
            }

            updateBatteryDisplay() {
                if (this.isFlat) {
                    this.batteryToggle.classList.remove('cylindrique');
                    this.batteryType.textContent = 'Pile Plate';
                    this.drawFlatBattery();
                } else {
                    this.batteryToggle.classList.add('cylindrique');
                    this.batteryType.textContent = 'Pile Cylindrique';
                    this.drawCylindricalBattery();
                }
            }

            drawFlatBattery() {
                // Transformer la pile en forme plate (LR12)
                const pileGroup = this.pile;

                // R√©cr√©er la forme plate
                const rect = pileGroup.querySelector('rect:first-child');
                if (rect) {
                    rect.setAttribute('x', '80');
                    rect.setAttribute('y', '120');
                    rect.setAttribute('width', '70');
                    rect.setAttribute('height', '120');
                    rect.setAttribute('rx', '3');
                }

                // Cacher les connecteurs cylindriques
                const connectors = pileGroup.querySelectorAll('rect:nth-child(2), rect:nth-child(3)');
                connectors.forEach(c => c.style.display = 'none');

                // Afficher les lames (pour pile plate LR12)
                let blades = pileGroup.querySelectorAll('.blade');
                if (blades.length === 0) {
                    // Cr√©er les lames si elles n'existent pas
                    // Lame positive (gauche)
                    const bladePosGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                    bladePosGroup.setAttribute('class', 'blade blade-positive');
                    const bladePosRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    bladePosRect.setAttribute('x', '85');
                    bladePosRect.setAttribute('y', '235');
                    bladePosRect.setAttribute('width', '12');
                    bladePosRect.setAttribute('height', '30');
                    bladePosRect.setAttribute('fill', '#FFD700');
                    bladePosRect.setAttribute('stroke', '#FFA500');
                    bladePosRect.setAttribute('stroke-width', '1');
                    bladePosGroup.appendChild(bladePosRect);
                    pileGroup.appendChild(bladePosGroup);

                    // Lame n√©gative (droite)
                    const bladeNegGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                    bladeNegGroup.setAttribute('class', 'blade blade-negative');
                    const bladeNegRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    bladeNegRect.setAttribute('x', '123');
                    bladeNegRect.setAttribute('y', '235');
                    bladeNegRect.setAttribute('width', '12');
                    bladeNegRect.setAttribute('height', '30');
                    bladeNegRect.setAttribute('fill', '#333');
                    bladeNegRect.setAttribute('stroke', '#000');
                    bladeNegRect.setAttribute('stroke-width', '1');
                    bladeNegGroup.appendChild(bladeNegRect);
                    pileGroup.appendChild(bladeNegGroup);
                } else {
                    // Afficher les lames existantes
                    blades.forEach(blade => blade.style.display = 'block');
                }
            }

            drawCylindricalBattery() {
                // Transformer la pile en forme cylindrique
                const pileGroup = this.pile;

                // Changer la forme rectangulaire en cylindre (utiliser une ellipse)
                const rect = pileGroup.querySelector('rect:first-child');
                if (rect) {
                    rect.setAttribute('rx', '35');
                    rect.setAttribute('ry', '60');
                }

                // Afficher les connecteurs cylindriques
                const connectors = pileGroup.querySelectorAll('rect:nth-child(2), rect:nth-child(3)');
                connectors.forEach(c => c.style.display = 'block');

                // Cacher les lames
                let blades = pileGroup.querySelectorAll('.blade');
                blades.forEach(blade => blade.style.display = 'none');
            }
        }

        // Initialiser le contr√¥leur de batterie
        const battery = new BatteryController();
    </script>
    </div>
</body>
</html>